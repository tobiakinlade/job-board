apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Reference base configuration

# Override namespace for dev
namespace: job-board-dev

# Dev-specific labels

# Override images with dev tags (updated by CI/CD)
images:
- name: backend-placeholder
  newName: 180048382895.dkr.ecr.eu-west-2.amazonaws.com/job-board-backend
  newTag: dev-latest
- name: frontend-placeholder
  newName: 180048382895.dkr.ecr.eu-west-2.amazonaws.com/job-board-frontend
  newTag: dev-fedb2cb

# ConfigMap for dev environment
configMapGenerator:
- behavior: merge
  literals:
  - ENVIRONMENT=development
  - LOG_LEVEL=debug
  - NODE_ENV=development
  name: app-config

# Patches for dev-specific changes

# Annotations for all resources
commonAnnotations:
  environment: dev
  managed-by: argocd
resources:
- ../../base
labels:
- includeSelectors: true
  pairs:
    environment: dev
patches:
- path: replica-patch.yaml
- path: resource-patch.yaml
